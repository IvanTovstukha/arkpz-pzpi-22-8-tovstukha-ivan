# Система управління акваріумами AquaSense

## Опис проекту

Проект AquaSense є серверною системою для автоматизації та моніторингу акваріумів з використанням IoT. Система забезпечує управління користувачами, моніторинг параметрів акваріума, автоматичне керування пристроями для підтримки екосистеми та логування даних для аналізу. AquaSense дозволяє власникам акваріумів дистанційно контролювати стан своїх акваріумів, оптимізуючи догляд за їхньою екосистемою.

## Основний функціонал

### Бізнес-логіка
Основні можливості системи AquaSense зосереджені на автоматизації моніторингу та управління акваріумами.
Параметри моніторингу:
- Контроль температури води, рівня кисню та pH.
- Автоматичне увімкнення/вимкнення пристроїв, таких як термостат, аератор і контролер pH, для корекції параметрів у разі їхнього відхилення від заданих меж.

Моніторинг та логування даних:
- Генерація показників сенсорів через певні інтервали часу.
- Автоматичний запис показників у базу даних для подальшого аналізу.
- Логування дій пристроїв у таблиці Logs, включаючи причини ввімкнення та вимкнення.

Автоматичне керування пристроями:
- Увімкнення пристрою для корекції значення, якщо воно виходить за межі норми.
- Вимкнення пристрою після досягнення показника в межах норми.
- Інтеграція з IoT-пристроями через MQTT-брокер для миттєвого керування.

Ролі користувачів:
- Власник акваріума отримує доступ до даних сенсорів, логів та статусу пристроїв.
- Адміністратор може додавати/видаляти акваріуми, пристрої та датчики.

### Основний функціонал
Моніторинг параметрів акваріума:
- Температура: підтримується в межах 22–28°C.
- Кисень: підтримується в межах 4–10 мг/л.
- pH: підтримується в межах 5–8.
- Автоматичне оновлення значень у базі даних після кожного циклу моніторингу.

Керування пристроями:
- Вмикання/вимикання термостата для корекції температури.
- Вмикання/вимикання аератора для корекції рівня кисню.
- Вмикання/вимикання контролера pH для стабілізації рівня pH.
- Звітність про стан пристроїв на OLED-дисплеї та в базі даних.

Інтеграція з IoT:
- Взаємодія з ESP32 для симуляції сенсорів і пристроїв.
- Виведення поточних значень сенсорів і стану пристроїв на OLED-дисплей.
- Відображення статусу пристроїв через світлодіоди.

Логування:
- Запис усіх дій у таблицю Logs.
- Інформація про зміни стану пристроїв і причин корекції параметрів.

Управління користувачами:
- Реєстрація та авторизація через API.
- Рольова система для доступу до різних рівнів функціоналу.


## Технології
- Backend: Node.js, Express.js
- База даних: MySQL
- IoT: Wokwi для симуляції ESP32, MQTT для обміну даними
- Інтерфейс: Swagger UI для документації та тестування API
- Безпека: bcrypt для шифрування паролів, токени JWT для аутентифікації

## Структура проекту
- index.js: основний серверний файл.
- routes/: маршрути для управління користувачами, акваріумами, пристроями, сенсорами та логами.
- config/db.js: конфігурація бази даних.
- ESP32-код: генерує значення сенсорів, відображає дані на OLED-дисплеї, управляє світлодіодами та пристроями через MQTT.

## Діаграми
Проект включає UML діаграми:
- Діаграми діяльності:
  - Моніторинг сенсорів.
  - Керування пристроями.
  - Логування параметрів і дій.
- Діаграма взаємодії:
  - Взаємодія між сервером, MQTT-брокером та ESP32
- Діаграма структури бази даних:
  - Таблиці: Users, Aquariums, Devices, Sensors, Logs.

Контакти  
Розробник: Товстуха Іван  
Email: ivan.tovstukha@nure.ua
